<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ—©è¯»ä»»åŠ¡æ¿</title>
    <style>
        body { font-family: sans-serif; background-color: #f0f2f5; margin: 0; padding: 20px; }
        h1 { text-align: center; color: #333; }
        .container { display: flex; gap: 20px; max-width: 1200px; margin: 0 auto; flex-wrap: wrap;}
        .box { flex: 1; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); min-width: 300px; min-height: 400px;}
        .title { font-size: 1.5em; border-bottom: 2px solid #eee; padding-bottom: 10px; margin-bottom: 20px; font-weight: bold; }
        .content { font-size: 1.3em; line-height: 1.6; white-space: pre-wrap; color: #444; }
        
        /* å·¦è¾¹é¢œè‰² */
        .left .title { color: #007bff; }
        /* å³è¾¹é¢œè‰² */
        .right .title { color: #dc3545; }
        
        /* é”å®šçŠ¶æ€ */
        .locked { display: flex; align-items: center; justify-content: center; height: 300px; background: #fafafa; color: #999; border: 2px dashed #ddd; font-style: italic; }
        .hidden { display: none; }
    </style>
</head>
<body>

    <h1>ğŸ“… ä»Šæ—¥æ—©è¯»ä»»åŠ¡</h1>

    <div class="container">
        <!-- å·¦ä¾§ï¼šæ—©è¯» -->
        <div class="box left">
            <div class="title">ğŸ“– æ—©è¯»ä»»åŠ¡</div>
            <div id="reading-content" class="content">åŠ è½½ä¸­...</div>
        </div>

        <!-- å³ä¾§ï¼šé»˜å†™ -->
        <div class="box right">
            <div class="title">âœï¸ é»˜å†™ä»»åŠ¡</div>
            <!-- å¼€æ”¾æ—¶æ˜¾ç¤ºè¿™ä¸ª -->
            <div id="dictation-content" class="content hidden"></div>
            <!-- æœªå¼€æ”¾æ—¶æ˜¾ç¤ºè¿™ä¸ª -->
            <div id="lock-msg" class="locked">â›” ä»»åŠ¡å°šæœªå¼€å¯ï¼Œè¯·ä¸“å¿ƒæ—©è¯»</div>
        </div>
    </div>

    <script>
        // å®šä¹‰è·å–æ•°æ®çš„å‡½æ•°
        function loadTasks() {
            // åŠ ä¸€ä¸ªæ—¶é—´æˆ³ ?t=... é˜²æ­¢æ‰‹æœºæµè§ˆå™¨ç¼“å­˜æ—§æ•°æ®
            fetch('data.json?t=' + new Date().getTime())
                .then(response => response.json())
                .then(data => {
                    // 1. æ›´æ–°æ—©è¯»
                    document.getElementById('reading-content').innerText = data.reading;

                    // 2. æ›´æ–°é»˜å†™çŠ¶æ€
                    const dictationDiv = document.getElementById('dictation-content');
                    const lockMsg = document.getElementById('lock-msg');

                    if (data.show_dictation === true) {
                        // å¦‚æœè€å¸ˆå¼€å¯äº†é»˜å†™
                        dictationDiv.innerText = data.dictation;
                        dictationDiv.classList.remove('hidden');
                        lockMsg.classList.add('hidden');
                    } else {
                        // å¦‚æœè€å¸ˆå…³é—­äº†é»˜å†™
                        dictationDiv.classList.add('hidden');
                        lockMsg.classList.remove('hidden');
                    }
                })
                .catch(err => console.log('ç­‰å¾…ç½‘ç»œè¿æ¥...'));
        }

        // é¡µé¢æ‰“å¼€æ—¶åŠ è½½ä¸€æ¬¡
        loadTasks();

        // æ¯ 5 ç§’è‡ªåŠ¨åˆ·æ–°ä¸€æ¬¡ï¼Œæ£€æŸ¥è€å¸ˆæœ‰æ²¡æœ‰æ›´æ–°
        setInterval(loadTasks, 5000);
    </script>
</body>
</html>
